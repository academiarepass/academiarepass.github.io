<!DOCTYPE html>
<html>
<head>
    <script>
        function loadApp() {
            // Detect Safari and browsers without Wasm GC support
            const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
            const hasWasmGC = typeof WebAssembly.GC === 'function';

            if (!isSafari && hasWasmGC) {
                // Load WASM version
                import('./composeApp.wasm').then(() => {
                    import('./composeApp.js');
                });
            } else {
                // Fallback to JS version
                const script = document.createElement('script');
                script.src = "composeApp.js";
                document.head.appendChild(script);
            }
        }
    </script>
</head>
<body onload="loadApp()">
<canvas id="ComposeTarget"></canvas>
</body>
</html>